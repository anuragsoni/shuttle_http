<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Input_channel (shuttle.Shuttle.Input_channel)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">shuttle</a> &#x00BB; <a href="../index.html">Shuttle</a> &#x00BB; Input_channel</nav><header class="odoc-preamble"><h1>Module <code><span>Shuttle.Input_channel</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sexp_of_t"><a href="#val-sexp_of_t" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_t : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-slice"><a href="#type-slice" class="anchor"></a><code><span><span class="keyword">type</span> slice</span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-slice.buf" class="def record field anchored"><a href="#type-slice.buf" class="anchor"></a><code><span>buf : <span class="xref-unresolved">Core</span>.Bigstring.t;</span></code></li><li id="type-slice.pos" class="def record field anchored"><a href="#type-slice.pos" class="anchor"></a><code><span>pos : int;</span></code></li><li id="type-slice.len" class="def record field anchored"><a href="#type-slice.len" class="anchor"></a><code><span>len : int;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span>?buf_len:int <span class="arrow">&#45;&gt;</span></span>
  <span>?time_source:<span><span>[&gt; <span class="xref-unresolved">Core</span>.read ]</span> <span class="xref-unresolved">Async_kernel</span>.Time_source.T1.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Async_unix</span>.Fd.t <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-time_source"><a href="#val-time_source" class="anchor"></a><code><span><span class="keyword">val</span> time_source : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Async_kernel</span>.Time_source.t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-buffer_size"><a href="#val-buffer_size" class="anchor"></a><code><span><span class="keyword">val</span> buffer_size : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_closed"><a href="#val-is_closed" class="anchor"></a><code><span><span class="keyword">val</span> is_closed : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-closed"><a href="#val-closed" class="anchor"></a><code><span><span class="keyword">val</span> closed : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Async_kernel</span>.Deferred.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-close"><a href="#val-close" class="anchor"></a><code><span><span class="keyword">val</span> close : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Async_kernel</span>.Deferred.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-refill"><a href="#val-refill" class="anchor"></a><code><span><span class="keyword">val</span> refill : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>[&gt; `Ok <span>| `Eof</span> ]</span> <span class="xref-unresolved">Async_kernel</span>.Deferred.t</span></span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Timeout"><a href="#exception-Timeout" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Timeout</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-refill_with_timeout"><a href="#val-refill_with_timeout" class="anchor"></a><code><span><span class="keyword">val</span> refill_with_timeout : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Core</span>.Time_ns.Span.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>[&gt; `Ok <span>| `Eof</span> ]</span> <span class="xref-unresolved">Async_kernel</span>.Deferred.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-view"><a href="#val-view" class="anchor"></a><code><span><span class="keyword">val</span> view : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-slice">slice</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-consume"><a href="#val-consume" class="anchor"></a><code><span><span class="keyword">val</span> consume : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-drain"><a href="#val-drain" class="anchor"></a><code><span><span class="keyword">val</span> drain : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Async_kernel</span>.Deferred.t</span></span></code></div><div class="spec-doc"><p><code>drain t</code> reads chunks of data from the reader and discards them.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pipe"><a href="#val-pipe" class="anchor"></a><code><span><span class="keyword">val</span> pipe : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="xref-unresolved">Async_kernel</span>.Pipe.Reader.t</span></span></code></div><div class="spec-doc"><p><code>pipe</code> returns a reader pipe that contains the results of reading chunks from an input_channel.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-transfer"><a href="#val-transfer" class="anchor"></a><code><span><span class="keyword">val</span> transfer : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>string <span class="xref-unresolved">Async_kernel</span>.Pipe.Writer.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Async_kernel</span>.Deferred.t</span></span></code></div><div class="spec-doc"><p><code>transfer</code> will read chunks from an input channel and write them to the provided writer end of an async pipe. The deferred returned by the function will be determined on EOF or if the writer is closed. Use <code>transfer</code> in scenarios where <code>pipe</code> is needed, but if there is a need to not close the channel automatically once the transfer is finished.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_pipe"><a href="#val-of_pipe" class="anchor"></a><code><span><span class="keyword">val</span> of_pipe : 
  <span>?buf_len:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Core</span>.Info.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>string <span class="xref-unresolved">Async_kernel</span>.Pipe.Reader.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> <span class="xref-unresolved">Async_kernel</span>.Deferred.t</span></span></code></div></div></div></body></html>