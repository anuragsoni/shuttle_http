<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Bytebuffer (shuttle.Shuttle.Bytebuffer)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">shuttle</a> &#x00BB; <a href="../index.html">Shuttle</a> &#x00BB; Bytebuffer</nav><header class="odoc-preamble"><h1>Module <code><span>Shuttle.Bytebuffer</span></code></h1><p>Extensible buffers using bigstrings.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sexp_of_t"><a href="#val-sexp_of_t" class="anchor"></a><code><span><span class="keyword">val</span> sexp_of_t : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sexplib0</span>.Sexp.t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>?max_buffer_size:int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>create ?max_buffer_size size</code> returns a new empty bytebuffer. The bytebuffer will be resized automatically, up-to max_buffer_size, if attempting to add more than <code>size</code> characters to the bytebuffer. <code>max_buffer_size</code> defaults to <code>Int.max_value</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compact"><a href="#val-compact" class="anchor"></a><code><span><span class="keyword">val</span> compact : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-available_to_write"><a href="#val-available_to_write" class="anchor"></a><code><span><span class="keyword">val</span> available_to_write : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ensure_space"><a href="#val-ensure_space" class="anchor"></a><code><span><span class="keyword">val</span> ensure_space : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-length"><a href="#val-length" class="anchor"></a><code><span><span class="keyword">val</span> length : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>length</code> returns the number of characters in the bytebuffer.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-capacity"><a href="#val-capacity" class="anchor"></a><code><span><span class="keyword">val</span> capacity : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>capacity</code> is the size of the underlying bigstring.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-drop"><a href="#val-drop" class="anchor"></a><code><span><span class="keyword">val</span> drop : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>drop n</code> removes <code>n</code> bytes from the beginning of the bytebuffer. This is usually called after a user processes some data from the buffer using a view into the internal bigstring via <code>unsafe_peek</code>.</p><p>Raises <code>invalid_arg</code> if <code>n</code> is greater than the buffer's length.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read"><a href="#val-read" class="anchor"></a><code><span><span class="keyword">val</span> read : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Core_unix</span>.File_descr.t <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>read buf fd</code> reads bytes from the file descriptor <code>fd</code> and appends them to the end of the bytebuffer. Returns the number of bytes actually read.</p><p>Raises <code>Bigstring_unix.IOError</code> in the case of input errors, or on EOF.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-write"><a href="#val-write" class="anchor"></a><code><span><span class="keyword">val</span> write : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Core_unix</span>.File_descr.t <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>write buf fd</code> reads data from the beginning of the buffer and writes them to the file descriptor <code>fd</code>.</p><p>Returns the number of bytes actually written.</p><p>Raises <code>Core_unix.Unix_error</code> in case of i/o errors.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-read_assume_fd_is_nonblocking"><a href="#val-read_assume_fd_is_nonblocking" class="anchor"></a><code><span><span class="keyword">val</span> read_assume_fd_is_nonblocking : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Core_unix</span>.File_descr.t <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Core_unix</span>.Syscall_result.Int.t</span></code></div><div class="spec-doc"><p><code>read_assume_fd_is_nonblocking buf fd</code> is similar to <code>read</code> but it performs the read without yielding to other OCaml-threads. This function should only be called for non-blocking file-descriptors.</p><p>Returns the number of bytes actually read.</p><p>Raises Invalid_argument if the designated range is out of bounds.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-write_assume_fd_is_nonblocking"><a href="#val-write_assume_fd_is_nonblocking" class="anchor"></a><code><span><span class="keyword">val</span> write_assume_fd_is_nonblocking : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Core_unix</span>.File_descr.t <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>write_assume_fd_is_nonblocking buf fd</code> is similar to <code>write</code> buf it performs the write without yielding to other OCaml-threads. This function should only be called for non-blocking file-descriptors.</p><p>Returns the number of bytes actually written.</p><p>Raises <code>Core_unix.Unix_error</code> in case of i/o errors.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_char"><a href="#val-add_char" class="anchor"></a><code><span><span class="keyword">val</span> add_char : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>add_char</code> appends the charater at the end of the bytebuffer.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_string"><a href="#val-add_string" class="anchor"></a><code><span><span class="keyword">val</span> add_string : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>?pos:int <span class="arrow">&#45;&gt;</span></span> <span>?len:int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>add_string</code> appends the string at the end of the bytebuffer.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_bytes"><a href="#val-add_bytes" class="anchor"></a><code><span><span class="keyword">val</span> add_bytes : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>?pos:int <span class="arrow">&#45;&gt;</span></span> <span>?len:int <span class="arrow">&#45;&gt;</span></span> <span>bytes <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>add_bytes</code> appends the bytes at the end of the bytebuffer.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_bigstring"><a href="#val-add_bigstring" class="anchor"></a><code><span><span class="keyword">val</span> add_bigstring : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>?pos:int <span class="arrow">&#45;&gt;</span></span> <span>?len:int <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Core</span>.Bigstring.t <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>add_bigstring</code> appends the bigstring at the end of the bytebuffer.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_bytebuffer"><a href="#val-add_bytebuffer" class="anchor"></a><code><span><span class="keyword">val</span> add_bytebuffer : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>add_bytebuffer</code> appends the contents of the buffer at the end of the bytebuffer.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span><span class="keyword">val</span> to_string : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>to_string</code> returns a copy of the current contents of the bytebuffer.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unsafe_index"><a href="#val-unsafe_index" class="anchor"></a><code><span><span class="keyword">val</span> unsafe_index : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>char <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Slice"><a href="#module-Slice" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Slice/index.html">Slice</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unsafe_peek"><a href="#val-unsafe_peek" class="anchor"></a><code><span><span class="keyword">val</span> unsafe_peek : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Slice/index.html#type-t">Slice.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-slice"><a href="#val-slice" class="anchor"></a><code><span><span class="keyword">val</span> slice : <span>?pos:int <span class="arrow">&#45;&gt;</span></span> <span>?len:int <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Slice/index.html#type-t">Slice.t</a></span></code></div></div></div></body></html>